@echo off
chcp 65001 >nul
echo ========================================
echo    ุชุดุบูู ูุธุงู ุฅุฏุงุฑุฉ ุงููุจูุนุงุช ูู ุงููุชุตูุญ
echo ========================================
echo.

echo [1/4] ุงูุชุญูู ูู ูุฌูุฏ ุงูุชุทุจูู ุงููุจูู...
if not exist "dist\index.html" (
    echo โ๏ธ  ุงูุชุทุจูู ุบูุฑ ูุจูู. ุณูุชู ุงูุจูุงุก ุงูุขู...
    echo.
    call npm run build
    if %errorlevel% neq 0 (
        echo โ ูุดู ูู ุจูุงุก ุงูุชุทุจูู
        pause
        exit /b 1
    )
    echo โ ุชู ุจูุงุก ุงูุชุทุจูู ุจูุฌุงุญ
    echo.
) else (
    echo โ ุงูุชุทุจูู ุฌุงูุฒ ููุชุดุบูู
    echo.
)

echo [2/4] ุงูุชุญูู ูู ุงูุชุจุนูุงุช...
if not exist "node_modules" (
    echo โ๏ธ  ุงูุชุจุนูุงุช ุบูุฑ ูุซุจุชุฉ. ุณูุชู ุงูุชุซุจูุช ุงูุขู...
    call npm install
    if %errorlevel% neq 0 (
        echo โ ูุดู ูู ุชุซุจูุช ุงูุชุจุนูุงุช
        pause
        exit /b 1
    )
    echo โ ุชู ุชุซุจูุช ุงูุชุจุนูุงุช ุจูุฌุงุญ
    echo.
) else (
    echo โ ุงูุชุจุนูุงุช ุฌุงูุฒุฉ
    echo.
)

echo [3/4] ุจุฏุก ุงูุฎุงุฏู ุงููุญูู...
echo โ ุจุฏุก ุชุดุบูู ุงูุฎุงุฏู ุนูู http://localhost:4173
echo.
echo ========================================
echo    ุงูุชุทุจูู ูุนูู ุงูุขู ูู ุงููุชุตูุญ! ๐
echo ========================================
echo.
echo ููุงุญุธุงุช ูููุฉ:
echo - ุณูุชู ูุชุญ ุงูุชุทุจูู ูู ุงููุชุตูุญ ุชููุงุฆูุงู
echo - ุงูุนููุงู: http://localhost:4173
echo - ููููู ุฅุบูุงู ูุฐู ุงููุงูุฐุฉ ูุฅููุงู ุงูุฎุงุฏู
echo - ูุฐุง ุงูุญู ุฃูุซุฑ ุงุณุชูุฑุงุฑุงู ูู Electron
echo.

echo [4/4] ุชุดุบูู ุงูุฎุงุฏู...
call npm run preview
if %errorlevel% neq 0 (
    echo โ ูุดู ูู ุชุดุบูู ุงูุฎุงุฏู
    echo.
    echo ุฌุฑุจ ุงูุญููู ุงูุชุงููุฉ:
    echo 1. ุชุฃูุฏ ูู ุชุซุจูุช Node.js
    echo 2. ุชุญูู ูู ุฃู ุงููููุฐ 4173 ุบูุฑ ูุณุชุฎุฏู
    echo 3. ุฃุนุฏ ุชุดุบูู ุงูููุจููุชุฑ
    echo.
    pause
    exit /b 1
)

echo.
echo ุชู ุฅููุงู ุงูุฎุงุฏู
pause
