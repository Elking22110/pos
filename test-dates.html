<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار التواريخ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: white;
            padding: 20px;
            direction: rtl;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: #16213e;
            padding: 20px;
            border-radius: 10px;
        }
        .test-item {
            margin: 10px 0;
            padding: 10px;
            background: #0f3460;
            border-radius: 5px;
        }
        button {
            background: #8B5CF6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #7C3AED;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>اختبار نظام التواريخ الميلادية</h1>
        
        <div class="test-item">
            <h3>التاريخ الحالي:</h3>
            <p id="current-date"></p>
        </div>
        
        <div class="test-item">
            <h3>التاريخ والوقت:</h3>
            <p id="date-time"></p>
        </div>
        
        <div class="test-item">
            <h3>التاريخ فقط:</h3>
            <p id="date-only"></p>
        </div>
        
        <div class="test-item">
            <h3>الوقت فقط:</h3>
            <p id="time-only"></p>
        </div>
        
        <div class="test-item">
            <h3>اسم اليوم:</h3>
            <p id="weekday"></p>
        </div>
        
        <button onclick="testDates()">اختبار التواريخ</button>
        <button onclick="clearData()">مسح البيانات</button>
    </div>

    <script>
        // نسخ دوال dateUtils هنا للاختبار
        const monthNames = {
            'January': 'يناير', 'February': 'فبراير', 'March': 'مارس', 'April': 'أبريل',
            'May': 'مايو', 'June': 'يونيو', 'July': 'يوليو', 'August': 'أغسطس',
            'September': 'سبتمبر', 'October': 'أكتوبر', 'November': 'نوفمبر', 'December': 'ديسمبر'
        };

        const dayNames = {
            'Sunday': 'الأحد', 'Monday': 'الاثنين', 'Tuesday': 'الثلاثاء', 'Wednesday': 'الأربعاء',
            'Thursday': 'الخميس', 'Friday': 'الجمعة', 'Saturday': 'السبت'
        };

        const translateToArabic = (text) => {
            let translated = text;
            
            Object.keys(monthNames).forEach(english => {
                const arabic = monthNames[english];
                translated = translated.replace(new RegExp(english, 'g'), arabic);
            });
            
            Object.keys(dayNames).forEach(english => {
                const arabic = dayNames[english];
                translated = translated.replace(new RegExp(english, 'g'), arabic);
            });
            
            translated = translated.replace(/AM/g, 'ص');
            translated = translated.replace(/PM/g, 'م');
            
            return translated;
        };

        const formatDate = (dateString) => {
            if (!dateString) return '';
            
            try {
                const date = new Date(dateString);
                
                if (isNaN(date.getTime())) {
                    return dateString;
                }
                
                const options = {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit',
                    hour12: true
                };
                
                const formatted = date.toLocaleDateString('en-US', options);
                return translateToArabic(formatted);
            } catch (error) {
                console.warn('خطأ في تنسيق التاريخ:', error);
                return dateString;
            }
        };

        const formatDateOnly = (dateString) => {
            if (!dateString) return '';
            
            try {
                const date = new Date(dateString);
                
                if (isNaN(date.getTime())) {
                    return dateString;
                }
                
                const options = {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                };
                
                const formatted = date.toLocaleDateString('en-US', options);
                return translateToArabic(formatted);
            } catch (error) {
                console.warn('خطأ في تنسيق التاريخ:', error);
                return dateString;
            }
        };

        const formatTimeOnly = (dateString) => {
            if (!dateString) return '';
            
            try {
                const date = new Date(dateString);
                
                if (isNaN(date.getTime())) {
                    return dateString;
                }
                
                const options = {
                    hour: 'numeric',
                    minute: '2-digit',
                    hour12: true
                };
                
                const formatted = date.toLocaleTimeString('en-US', options);
                return translateToArabic(formatted);
            } catch (error) {
                console.warn('خطأ في تنسيق الوقت:', error);
                return dateString;
            }
        };

        const formatWeekday = (dateString) => {
            try {
                const date = new Date(dateString);
                
                if (isNaN(date.getTime())) {
                    return dateString;
                }
                
                const formatted = date.toLocaleDateString('en-US', { weekday: 'long' });
                return translateToArabic(formatted);
            } catch (error) {
                return dateString;
            }
        };

        const getCurrentDate = () => {
            return new Date().toISOString();
        };

        function testDates() {
            const now = getCurrentDate();
            
            document.getElementById('current-date').textContent = formatDate(now);
            document.getElementById('date-time').textContent = formatDate(now);
            document.getElementById('date-only').textContent = formatDateOnly(now);
            document.getElementById('time-only').textContent = formatTimeOnly(now);
            document.getElementById('weekday').textContent = formatWeekday(now);
        }

        function clearData() {
            localStorage.clear();
            alert('تم مسح جميع البيانات');
        }

        // تشغيل الاختبار عند تحميل الصفحة
        window.onload = testDates;
    </script>
</body>
</html>
